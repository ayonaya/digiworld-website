<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>DigiWorld - Instant Digital Keys for Software and Games</title>
  <meta name="description" content="Your trusted source for genuine digital keys. Get instant delivery on Windows, Microsoft Office, antivirus software, and more. Secure payments and 24/7 support.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
</head>
<body>
  
<header class="site-header">
  <div class="header-main-pro header-desktop">
    <a href="index.html" class="logo-pro" style="text-decoration: none;">DigiWorld</a>
    <nav>
      <a href="index.html" class="nav-link-pro active">Home</a>
      <a href="products.html" class="nav-link-pro">Products</a>
      <a href="contact.html" class="nav-link-pro">Contact</a>
    </nav>
    <div class="header-controls">
        <div class="lang-currency-wrap">
          <div class="lang-currency-switcher">
            <div class="dropdown" id="langDropdown">
              <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false">
                <span class="flag" id="currentLangFlag">üá∫üá∏</span>
                <span id="currentLangLabel">English</span>
                <svg width="13" height="7"><path d="M1 1l5.5 5L12 1" stroke="#fe724c" stroke-width="2" fill="none"/></svg>
              </button>
              <div class="dropdown-menu" id="langMenu">
                <div class="dropdown-item" data-lang="en">üá∫üá∏ English</div>
                <div class="dropdown-item" data-lang="si">üá±üá∞ ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</div>
                <div class="dropdown-item" data-lang="ta">üáÆüá≥ ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</div>
                <div class="dropdown-item" data-lang="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</div>
                <div class="dropdown-item" data-lang="zh">üá®üá≥ ‰∏≠Êñá</div>
                <div class="dropdown-item" data-lang="es">üá™üá∏ Espa√±ol</div>
              </div>
            </div>
            <div class="dropdown" id="currencyDropdown">
              <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false">
                <span id="currentCurrSymbol">$</span><span id="currentCurrLabel">USD</span>
                <svg width="13" height="7"><path d="M1 1l5.5 5L12 1" stroke="#fe724c" stroke-width="2" fill="none"/></svg>
              </button>
              <div class="dropdown-menu" id="currencyMenu">
                <div class="dropdown-item" data-curr="USD">$ USD</div>
                <div class="dropdown-item" data-curr="LKR">üá±üá∞ LKR</div>
                <div class="dropdown-item" data-curr="INR">‚Çπ INR</div>
                <div class="dropdown-item" data-curr="EUR">‚Ç¨ EUR</div>
                <div class="dropdown-item" data-curr="GBP">¬£ GBP</div>
              </div>
            </div>
          </div>
        </div>
        
        <button id="loginBtn" class="auth-btn" style="display:none;">Login</button>
        <button id="signupBtn" class="auth-btn" style="display:none;">Signup</button>
        <div class="account-dropdown" style="display:none; position: relative;">
          <button id="accountBtn" aria-haspopup="true" aria-expanded="false" class="account-btn" aria-label="User Account">
            Account
            <svg width="12" height="7" style="margin-left:4px;" viewBox="0 0 12 7" fill="none" stroke="#fe724c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M1 1l5 5 5-5" />
            </svg>
          </button>
          <div id="accountMenu" class="account-menu" style="display:none;">
             </div>
        </div>
        
        <button class="cart-btn" id="cartBtn" aria-label="Open cart">
          <i class="fas fa-shopping-cart"></i>
          <span>Cart</span>
          <span class="cart-icon-badge" id="cartCount">0</span>
        </button>
    </div>
  </div>
  <form class="search-bar-modern" autocomplete="off" onsubmit="return false;" role="search">
    <select class="category-dropdown" aria-label="Select category">
      <option>All Categories</option>
      <option>Windows</option>
      <option>Office</option>
      <option>Development Tools</option>
    </select>
    <input
      type="text"
      id="searchInput"
      placeholder="Search for products‚Ä¶"
      aria-autocomplete="list"
      aria-controls="searchSuggestionsDesktop"
      aria-expanded="false"
      aria-label="Search products"
    />
    <button class="search-btn-modern" type="submit">Search</button>
    <div class="search-suggestions" id="searchSuggestionsDesktop" role="listbox"></div>
  </form>
</header>

<main>
  <section class="main-section" aria-label="Featured products">
    <div class="product-controls">
      <div class="control-group">
        <label for="categoryFilter">Category:</label>
        <select id="categoryFilter">
          <option value="all">All Products</option>
          <option value="Office">Office</option>
          <option value="Windows">Windows</option>
          <option value="Development">Development Tools</option>
        </select>
      </div>
      <div class="control-group">
        <label for="sortProducts">Sort by:</label>
        <select id="sortProducts">
          <option value="default">Default</option>
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="name-asc">Name: A to Z</option>
          <option value="name-desc">Name: Z to A</option>
        </select>
      </div>
    </div>
    
    <div class="section-title">Featured Products</div>
    <div class="product-grid" id="productGrid">
        </div>
  </section>
</main>

<div class="mini-cart-overlay" id="miniCartOverlay" role="dialog" aria-modal="true" aria-labelledby="miniCartTitle"></div>
<div
  class="mini-cart-drawer"
  id="miniCartDrawer"
  aria-labelledby="miniCartTitle"
  tabindex="-1"
>
  <div class="mini-cart-header">
    <span id="miniCartTitle">Your Cart</span>
    <button class="mini-cart-close" id="miniCartClose" aria-label="Close cart">&times;</button>
  </div>
  <div class="mini-cart-items" id="miniCartItems"></div>
  <div class="mini-cart-footer">
    <div class="mini-cart-total" id="miniCartTotal"></div>
    <button class="mini-cart-checkout" onclick="window.location.href='cart.html'">Go to Cart</button>
  </div>
</div>

<footer class="site-footer">
    <div class="footer-grid">
        <div class="footer-col">
            <h3>Customer Care</h3>
            <ul>
                <li><a href="#">FAQ</a></li>
                <li><a href="#">How to Buy</a></li>
                <li><a href="#">Refund Policy</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h3>About DigiWorld</h3>
            <ul>
                <li><a href="about.html">About Us</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li><a href="#">Terms & Conditions</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h3>We Accept</h3>
            <div class="payment-methods-logos">
                <img src="https://www.paypalobjects.com/webstatic/mktg/logo/AM_SbyPP_mc_vs_dc_ae.jpg" alt="PayPal and Credit Cards">
                <img src="https://nowpayments.io/images/nowpayments.svg" alt="NowPayments Crypto">
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        &copy; 2025 DigiWorld. All rights reserved.
    </div>
</footer>

<nav class="dw-bottom-nav" id="dwBottomNav">
    <a href="index.html" class="dw-nav-home dw-nav-active"><i class="fas fa-home"></i><span>Home</span></a>
    <a href="products.html" class="dw-nav-categories"><i class="fas fa-th-large"></i><span>Products</span></a>
    <button id="dwNavCart" class="dw-nav-cart"><i class="fas fa-shopping-cart"></i><span class="cart-icon-badge" id="dwCartCount">0</span></button>
    <a href="account.html" class="dw-nav-account"><i class="fas fa-user"></i><span>Account</span></a>
</nav>

<button id="dwBackToTop" title="Back to Top" style="display:none;">‚Üë</button>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script>
  // This inline script handles the immediate visibility of the login/account buttons
  const firebaseConfig = {
    apiKey: "AIzaSyBbBDB38gK4lD-E3wYgfTSQbZ28WCmJB6M",
    authDomain: "digiworld-46a1e.firebaseapp.com",
    projectId: "digiworld-46a1e",
    storageBucket: "digiworld-46a1e.appspot.com",
    messagingSenderId: "242235397710",
    appId: "1:242235397710:web:a80c15cc285188610cd51f",
    measurementId: "G-R8C4BWHXBL"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  const loginBtn = document.getElementById('loginBtn');
  const signupBtn = document.getElementById('signupBtn');
  const accountDropdown = document.querySelector('.account-dropdown');
  const accountBtn = document.getElementById('accountBtn');
  const accountMenu = document.getElementById('accountMenu');

  function renderLoggedInMenu() {
    accountMenu.innerHTML = `
      <a href="profile.html">Profile</a>
      <a href="orders.html">Orders</a>
      <a href="downloads.html">Downloads</a>
      <button id="logoutBtn">Logout</button>
    `;
    document.getElementById('logoutBtn').addEventListener('click', () => auth.signOut());
  }

  accountBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    accountMenu.style.display = accountMenu.style.display === 'block' ? 'none' : 'block';
  });
  
  document.addEventListener('click', () => {
      accountMenu.style.display = 'none';
  });

  auth.onAuthStateChanged(user => {
    if (user) {
      loginBtn.style.display = 'none';
      signupBtn.style.display = 'none';
      accountDropdown.style.display = 'inline-block';
      renderLoggedInMenu();
    } else {
      loginBtn.style.display = 'inline-block';
      signupBtn.style.display = 'inline-block';
      accountDropdown.style.display = 'none';
    }
  });

  if (loginBtn) loginBtn.addEventListener('click', () => { window.location.href = 'login.html'; });
  if (signupBtn) signupBtn.addEventListener('click', () => { window.location.href = 'signup.html'; });
</script>

<script src="main.js" type="module" defer></script>

</body>
</html>